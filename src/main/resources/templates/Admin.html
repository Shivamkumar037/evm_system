<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVM Pro Admin | Hybrid Interface</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #e0e5ec;
            --shadow-dark: #a3b1c6;
            --shadow-light: #ffffff;
            --metal-blue: #004a99;
            --metal-dark: #002d5d;
            --accent-gold: #ffc300;
        }

        body { 
            background-color: var(--bg-color);
            min-height: 100vh; font-family: 'Segoe UI', sans-serif; margin: 0; 
            padding-bottom: 160px; /* Space for the floating console */
        }

        .nav-3d {
            background: linear-gradient(180deg, var(--metal-blue), var(--metal-dark));
            padding: 15px 30px; border-bottom: 4px solid var(--accent-gold);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* RESPONSIVE CONTAINER FOR BUTTONS */
        .console-dock {
            position: fixed; bottom: 40px; left: 50%;
            transform: translateX(-50%);
            display: flex; justify-content: center; align-items: center;
            gap: 20px; z-index: 3000;
            width: 95%; max-width: 900px; /* Laptop par bada dikhega */
            padding: 10px;
        }

        /* 4-KHANO WALI BUTTONS (Side Buttons) */
        .square-btn {
            background: var(--bg-color);
            flex: 1; max-width: 100px; height: 80px;
            border-radius: 20px; /* Square with rounded corners */
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-decoration: none; color: var(--metal-dark);
            font-size: 0.75rem; font-weight: 800;
            box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
            transition: 0.3s; border: 1px solid rgba(255,255,255,0.4);
        }
        .square-btn i { font-size: 1.5rem; margin-bottom: 5px; }
        .square-btn:hover { transform: translateY(-5px); background: #fff; color: var(--metal-blue); }

        /* GOLE BUTTON (Center Master) */
        .master-wrapper { position: relative; }
        .circle-btn-core {
            width: 100px; height: 100px; border-radius: 50%;
            border: 5px solid #fff; display: flex; align-items: center;
            justify-content: center; font-size: 2.2rem; color: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transition: 0.2s; cursor: pointer; z-index: 5; position: relative;
        }
        .circle-btn-core:active { transform: scale(0.9); }

        .state-rest { background: linear-gradient(145deg, #6c757d, #343a40); }
        .state-start { background: linear-gradient(145deg, #28a745, #155724); border-color: #34ce57; }
        .state-stop { background: linear-gradient(145deg, #d90429, #780216); }

        /* RED SLIDE NOTIFICATION */
        .status-ribbon {
            position: absolute; left: 50%; transform: translateX(-50%);
            bottom: 50px; background: #d90429; color: white;
            padding: 8px 25px; border-radius: 12px; font-weight: 900;
            font-size: 0.8rem; white-space: nowrap; opacity: 0;
            transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .status-ribbon.active { opacity: 1; bottom: 110px; }

        /* Main Display Chassis */
        .glass-chassis {
            background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px);
            border-radius: 40px; border: 1px solid rgba(255,255,255,0.5);
            padding: 40px; margin: 40px auto; max-width: 1000px;
            box-shadow: 20px 20px 60px var(--shadow-dark), -20px -20px 60px var(--shadow-light);
        }

        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            .square-btn { height: 65px; border-radius: 15px; font-size: 0.6rem; }
            .circle-btn-core { width: 80px; height: 80px; font-size: 1.8rem; }
            .console-dock { gap: 8px; }
        }
    </style>
</head>
<body>

<nav class="nav-3d d-flex justify-content-between align-items-center">
    <h4 class="m-0 text-white fw-bold">EVM <span class="fw-light">SYSTEM ADMIN</span></h4>
    <div class="d-flex align-items-center gap-3">
        <span class="text-white small d-none d-lg-block" th:text="${email}">admin@mail.com</span>
        <form th:action="@{/logout}" method="post">
            <button class="btn btn-sm btn-light rounded-pill px-3 fw-bold">LOGOUT</button>
        </form>
    </div>
</nav>

<div class="container mt-4">
    <div class="glass-chassis text-center">
        <h3 class="fw-bold mb-4" style="color: var(--metal-dark)">Election Analytics</h3>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="p-4 bg-white rounded-4 shadow-sm">
                    <i class="fas fa-users fa-2x mb-2 text-primary"></i>
                    <h1 class="fw-bold" th:text="${totalUsers}">0</h1>
                    <p class="text-muted fw-bold">TOTAL VOTERS</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-4 bg-white rounded-4 shadow-sm">
                    <i class="fas fa-user-tie fa-2x mb-2 text-success"></i>
                    <h1 class="fw-bold" th:text="${activeCandidates.size()}">0</h1>
                    <p class="text-muted fw-bold">ACTIVE CANDIDATES</p>
                </div>
            </div>
        </div>

        <div th:if="${status == 'stop'}" class="mt-4 p-4 border border-3 border-danger rounded-4 bg-white">
            <i class="fas fa-crown fa-3x text-warning mb-2"></i>
            <h4 class="fw-bold" th:text="${Candidate_winner != null and !Candidate_winner.isEmpty() ? Candidate_winner[0].name : 'N/A'}">Winner</h4>
            <div class="badge bg-danger">ELECTION FINALIZED</div>
        </div>
    </div>
</div>

<div class="console-dock">
    
    <a th:href="@{/admin/create_member}" class="square-btn">
        <i class="fas fa-user-shield"></i>
        <span>Member</span>
    </a>
    <a th:href="@{/admin/allActivecandidate}" class="square-btn">
        <i class="fas fa-id-card"></i>
        <span>Active</span>
    </a>

    <div class="master-wrapper">
        <div id="slideMsg" class="status-ribbon">
            SYSTEM STATUS: <span th:text="${status.toUpperCase()}">REST</span>
        </div>
        <a th:href="@{/admin/statuschange}" id="masterBtn" class="circle-btn-core"
           th:classappend="${status == 'start' ? 'state-start' : (status == 'stop' ? 'state-stop' : 'state-rest')}">
            <i class="fas fa-power-off"></i>
        </a>
    </div>

    <a th:href="@{/admin/allInActivecandidate}" class="square-btn">
        <i class="fas fa-clock"></i>
        <span>Pending</span>
    </a>
    <a th:href="@{/admin/signup_candidate}" class="square-btn">
        <i class="fas fa-user-plus"></i>
        <span>Candidate</span>
    </a>

</div>

<script>
    // Animation trigger on page load
    window.onload = function() {
        const ribbon = document.getElementById('slideMsg');
        setTimeout(() => {
            ribbon.classList.add('active');
            // 2.5 second baad wapas andar
            setTimeout(() => {
                ribbon.classList.remove('active');
            }, 2500);
        }, 600);
    };

    // Animation trigger on button click
    document.getElementById('masterBtn').onclick = function() {
        const ribbon = document.getElementById('slideMsg');
        ribbon.classList.add('active');
    };
</script>

</body>
</html>